<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="/rando-matos/manifest.json">
    <title>Backpack Filler Prototype Avanc√©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f6; /* Light background */
            color: #333;
            margin: 0; /* Remove default body margin */
            padding: 0;
            display: flex; /* Use flexbox for layout */
            min-height: 100vh; /* Minimum height of the viewport */
        }
        .sidebar {
            width: 250px; /* Fixed width sidebar */
            background-color: #e9ecef; /* Light sidebar background */
            padding: 20px;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        .sidebar h2 {
            color: #005f73;
            margin-bottom: 20px;
            text-align: center;
        }
        .sidebar nav ul {
            list-style: none;
            padding: 0;
        }
        .sidebar nav ul li {
            margin-bottom: 10px;
        }
        .sidebar nav ul li a {
            display: flex; /* Use flex for icon and text alignment */
            align-items: center;
            padding: 10px 15px;
            color: #333;
            text-decoration: none;
            border-radius: 8px; /* Rounded corners for menu items */
            transition: background-color 0.3s ease;
        }
         .sidebar nav ul li a i {
             margin-right: 10px; /* Space between icon and text */
         }
        .sidebar nav ul li a:hover {
            background-color: #d0d4d8; /* Slightly darker on hover */
        }
        .sidebar nav ul li a.active {
            background-color: #0077b6; /* Active item background */
            color: white;
        }
         .sidebar nav ul li a.active .menu-weight {
             color: rgba(255, 255, 255, 0.8); /* Lighter weight text in active state */
         }

        .main-content {
            flex-grow: 1; /* Main content takes remaining space */
            padding: 20px;
            overflow-y: auto; /* Enable scrolling if content overflows */
        }
        .content-section {
             background-color: #fff;
             padding: 30px;
             border-radius: 15px;
             box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
             margin-bottom: 20px; /* Add margin between sections if multiple are visible (though we will hide them) */
        }

        h1 {
            color: #005f73; /* A clean blue */
            text-align: center;
            margin-bottom: 30px;
        }
        h2 {
            color: #0077b6; /* A vibrant blue */
            margin-bottom: 15px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
         h3 {
            color: #023e8a; /* Darker blue */
            margin-top: 20px;
            margin-bottom: 10px;
        }
        /* --- Form Styling --- */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Adjusted grid for form */
            gap: 20px; /* Increased gap */
            margin-bottom: 20px;
        }
         .form-group {
             display: flex;
             flex-direction: column; /* Stack label and input */
         }
         .form-group label {
             margin-bottom: 5px;
             font-weight: 600;
             color: #555;
         }
        .form-group input[type="text"],
        .form-group input[type="number"],
        .form-group input[type="url"],
        .form-group select {
            width: 100%;
            padding: 12px; /* Increased padding */
            border: 1px solid #ccc;
            border-radius: 8px; /* More rounded corners */
            font-size: 1rem;
             transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
         .form-group input[type="text"]:focus,
         .form-group input[type="number"]:focus,
         .form-group input[type="url"]:focus,
         .form-group select:focus {
             border-color: #0077b6; /* Highlight on focus */
             box-shadow: 0 0 5px rgba(0, 119, 182, 0.3);
             outline: none; /* Remove default outline */
         }

         .checkbox-group {
             display: flex;
             align-items: center;
             gap: 10px;
             margin-top: 10px; /* Space above checkbox */
         }
         .checkbox-group input[type="checkbox"] {
             width: 20px;
             height: 20px;
             cursor: pointer;
             border-radius: 4px;
             border: 1px solid #ccc;
             appearance: none; /* Hide default checkbox */
             -webkit-appearance: none;
             -moz-appearance: none;
             position: relative;
             transition: background-color 0.3s ease, border-color 0.3s ease;
         }
         .checkbox-group input[type="checkbox"]:checked {
             background-color: #06d6a0; /* Green when checked */
             border-color: #06d6a0;
         }
          .checkbox-group input[type="checkbox"]:checked::after {
             content: '\2713'; /* Checkmark symbol */
             position: absolute;
             top: 50%;
             left: 50%;
             transform: translate(-50%, -50%);
             color: white;
             font-size: 14px;
             font-weight: bold;
          }

        .form-button {
            width: auto; /* Button width based on content */
            padding: 12px 25px; /* Increased padding */
            background-color: #0077b6; /* A vibrant blue */
            color: white;
            border: none;
            border-radius: 8px; /* More rounded corners */
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s ease;
            font-size: 1.1rem;
            font-weight: 600;
            display: block; /* Make button a block element for full width on small screens */
            margin-top: 20px; /* Space above the button */
        }
         @media (min-width: 640px) {
             .form-button {
                 display: inline-block; /* Back to inline-block on larger screens */
             }
         }


        .form-button:hover {
            background-color: #023e8a; /* Darker blue on hover */
        }
         .form-button:active {
             transform: scale(0.98); /* Slightly shrink on click */
         }

        /* --- Existing Styles --- */
        .input-group { /* Generic input group style */
             display: flex;
             gap: 15px;
             margin-bottom: 15px;
        }
        .input-group input[type="text"] {
             flex-grow: 1;
             padding: 10px;
             border: 1px solid #ccc;
             border-radius: 5px;
             font-size: 1rem;
        }
         .input-group button {
             padding: 10px 20px;
             background-color: #00b4d8; /* Cyan */
             color: white;
             border: none;
             border-radius: 5px;
             cursor: pointer;
             transition: background-color 0.3s ease;
         }
         .input-group button:hover {
             background-color: #48cae4; /* Lighter cyan on hover */
         }


        .item-list, .pack-list, .category-list {
            list-style: none;
            padding: 0;
        }
        .item, .pack-item, .category-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 10px; /* Increased padding for better bar visibility */
            border-bottom: 1px solid #ccc;
            position: relative; /* Needed for absolute positioning of bar graph */
             overflow: hidden; /* Hide overflow from bar graph */
             min-height: 40px; /* Ensure minimum height for bar */
        }
        .item:last-child, .pack-item:last-child, .category-item:last-child {
            border-bottom: none;
        }

        .item-details, .pack-details, .category-details {
            flex-grow: 1;
            margin-right: 15px;
            z-index: 1; /* Ensure details are above the bar graph */
            /* Removed semi-transparent background */
            /* Removed padding-right */
             display: flex; /* Use flexbox for details to align image */
             align-items: center; /* Vertically center items */
        }
        .item-details img {
            margin-right: 10px; /* Space between image and text */
        }

        .item-name, .pack-name, .category-name {
            font-weight: 600;
        }
        .item-weight, .pack-weight, .category-weight {
            font-size: 0.9rem;
            color: #555;
        }
         .item-brand, .item-category, .item-tags, .item-capacity, .item-consumable {
             font-size: 0.8rem;
             color: #666;
             margin-left: 5px;
         }
        .item-actions, .pack-actions, .category-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            z-index: 1; /* Ensure actions are above the bar graph */
            /* Removed semi-transparent background */
            /* Removed padding-left */
        }
        .item-actions button, .pack-actions button, .category-actions button {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .pack-button {
            background-color: #00b4d8; /* Cyan */
            color: white;
        }
        .pack-button:hover {
            background-color: #48cae4; /* Lighter cyan on hover */
        }
        .packed .pack-button {
            background-color: #06d6a0; /* Green when packed */
        }
        .packed .pack-button:hover {
             background-color: #80ed99; /* Lighter green on hover */
        }
        .delete-button {
            background-color: #ef476f; /* Red */
            color: white;
        }
        .delete-button:hover {
            background-color: #ff7096; /* Lighter red on hover */
        }
         .edit-button {
             background-color: #ffb703; /* Yellow/Orange */
             color: white;
         }
         .edit-button:hover {
             background-color: #ffc300; /* Lighter yellow/orange on hover */
         }
        .view-pack-button, .view-category-button {
             background-color: #90e0ef; /* Light blue */
             color: #023e8a;
        }
         .view-pack-button:hover, .view-category-button:hover {
             background-color: #ade8f4;
         }

        .total-weight {
            text-align: right;
            font-size: 1.2rem;
            font-weight: 700;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 2px solid #ccc;
        }
        .packed-status {
            font-size: 0.9rem;
            color: #06d6a0; /* Green */
            font-weight: 600;
        }
         .not-packed-status {
            font-size: 0.9rem;
            color: #ef476f; /* Red */
            font-weight: 600;
        }

        /* --- Improved Weight Bar Styling --- */
        .weight-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            /* Use a subtle gradient */
            background: linear-gradient(to right, rgba(0, 119, 182, 0.1), rgba(0, 119, 182, 0.3));
            width: 0%; /* Will be set by JS */
            z-index: 0; /* Behind the content */
            transition: width 0.5s ease-in-out;
            border-radius: 8px; /* Rounded corners for the bar */
        }

         /* Style for packed items/packs/categories */
         .packed .weight-bar {
             background: linear-gradient(to right, rgba(6, 214, 160, 0.1), rgba(6, 214, 160, 0.3)); /* Green gradient for packed */
         }


        .pack-packing-view {
            margin-top: 20px;
            padding: 15px;
            background-color: #caf0f8; /* Lighter blue background */
            border-radius: 8px;
            border: 1px dashed #00b4d8;
        }
        .pack-packing-view h3 {
            margin-top: 0;
            border-bottom: 1px dashed #00b4d8;
            padding-bottom: 5px;
        }
        .pack-packing-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px dotted #90e0ef;
        }
        .pack-packing-item:last-child {
            border-bottom: none;
        }
        .pack-packing-item .item-name {
            flex-grow: 1;
            margin-right: 10px;
        }
        .pack-packing-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

         /* Hide content sections by default, show only the active one */
         .content-section {
             display: none;
         }
         .content-section.active {
             display: block;
         }

         .menu-weight {
             margin-left: auto; /* Push weight to the right */
             font-size: 0.9rem;
             color: #555;
         }

          /* Responsive adjustments */
         @media (max-width: 768px) {
             body {
                 flex-direction: column; /* Stack sidebar and content on small screens */
             }
             .sidebar {
                 width: 100%; /* Full width sidebar on small screens */
                 height: auto; /* Height adjusts to content */
                 box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
             }
             .sidebar nav ul {
                 display: flex; /* Arrange menu items in a row */
                 flex-wrap: wrap; /* Allow wrapping */
                 justify-content: center; /* Center menu items */
                 gap: 10px; /* Add space between menu items */
             }
             .sidebar nav ul li {
                 margin-bottom: 0; /* Remove bottom margin */
             }
             .sidebar nav ul li a {
                 padding: 8px 12px; /* Adjust padding */
                 flex-direction: column; /* Stack icon and text */
                 text-align: center;
             }
             .sidebar nav ul li a i {
                 margin-right: 0;
                 margin-bottom: 5px; /* Space between icon and text */
             }
             .menu-weight {
                 margin-left: 0; /* Remove auto margin */
                 margin-top: 5px; /* Add space above weight */
             }
             .main-content {
                 padding: 15px; /* Adjust padding */
             }
             .content-section {
                 padding: 20px; /* Adjust padding */
             }
         }


         /* Modal styles */
         .modal {
             display: none; /* Hidden by default */
             position: fixed; /* Stay in place */
             z-index: 100; /* Sit on top */
             left: 0;
             top: 0;
             width: 100%; /* Full width */
             height: 100%; /* Full height */
             overflow: auto; /* Enable scroll if needed */
             background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
         }

         .modal-content {
             background-color: #fefefe;
             margin: 10% auto; /* 10% from the top and centered */
             padding: 20px;
             border: 1px solid #888;
             width: 80%; /* Could be more or less, depending on screen size */
             max-width: 600px; /* Max width for larger screens */
             border-radius: 10px;
             box-shadow: 0 5px 15px rgba(0,0,0,0.3);
         }

         .close-button {
             color: #aaa;
             float: right;
             font-size: 28px;
             font-weight: bold;
         }

         .close-button:hover,
         .close-button:focus {
             color: #000;
             text-decoration: none;
             cursor: pointer;
         }

        /* --- Pack Detail Page Styles --- */
        .pack-detail-grid {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Two columns */
            gap: 30px; /* Space between columns */
        }

        .pack-detail-column h3 {
            margin-top: 0;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }

        .pack-detail-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px; /* Adjusted padding for bar */
            border-bottom: 1px dotted #eee;
            position: relative; /* Needed for absolute positioning of bar graph */
            overflow: hidden; /* Hide overflow from bar graph */
            min-height: 40px; /* Ensure minimum height for bar */
        }
         .pack-detail-item:last-child {
             border-bottom: none;
         }

        .pack-detail-item-name {
            flex-grow: 1;
            margin-right: 10px;
            z-index: 1; /* Ensure details are above the bar graph */
        }

        .pack-detail-actions {
             display: flex;
             gap: 5px; /* Space between buttons */
             align-items: center;
             z-index: 1; /* Ensure actions are above the bar graph */
        }

        .pack-detail-actions button {
             padding: 5px 10px;
             border: none;
             border-radius: 5px;
             cursor: pointer;
             transition: background-color 0.3s ease;
        }

        .add-to-pack-button {
             background-color: #06d6a0; /* Green */
             color: white;
        }
         .add-to-pack-button:hover {
             background-color: #80ed99; /* Lighter green */
         }

        .remove-from-pack-button {
             background-color: #ef476f; /* Red */
             color: white;
        }
         .remove-from-pack-button:hover {
             background-color: #ff7096; /* Lighter red */
         }

         .pack-item-packed-button {
             background-color: #00b4d8; /* Cyan */
             color: white;
         }
         .pack-item-packed-button:hover {
             background-color: #48cae4; /* Lighter cyan on hover */
         }
         .pack-detail-item.packed .pack-item-packed-button {
             background-color: #06d6a0; /* Green when packed */
         }
         .pack-detail-item.packed .pack-item-packed-button:hover {
             background-color: #80ed99; /* Lighter green on hover */
         }

        .unpack-all-button {
            background-color: #ffb703; /* Yellow/Orange */
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-bottom: 20px; /* Space below button */
        }
         .unpack-all-button:hover {
             background-color: #ffc300; /* Lighter yellow/orange */
         }

        /* Category Management Styles */
        .category-management-list .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 10px;
            background-color: #e9ecef; /* Light background for category header */
            border-bottom: 1px solid #ccc;
            font-weight: 600;
            cursor: pointer; /* Indicate clickable */
            border-radius: 8px;
            margin-bottom: 5px;
        }
        .category-management-list .category-header:hover {
            background-color: #d0d4d8;
        }
        .category-management-list .category-content {
            display: none; /* Hidden by default */
            padding-left: 20px; /* Indent items */
            border-left: 2px solid #0077b6; /* Visual indicator */
            margin-bottom: 10px;
        }
        .category-management-list .category-content.is-visible {
            display: block;
        }
         .category-management-list .category-content .item {
             padding: 8px 0; /* Smaller padding for items within category */
             border-bottom: 1px dotted #eee;
         }
         .category-management-list .category-content .item:last-child {
             border-bottom: none;
         }
         .category-management-list .category-header .category-name {
             flex-grow: 1;
         }
         .category-management-list .category-header .category-item-count {
             font-size: 0.9rem;
             color: #555;
         }

        /* Styles for LLM features */
        .llm-button {
             background-color: #6a0572; /* Deep purple */
             color: white;
             padding: 8px 15px;
             border: none;
             border-radius: 8px;
             cursor: pointer;
             transition: background-color 0.3s ease, transform 0.1s ease;
             font-size: 0.9rem;
             font-weight: 600;
             margin-top: 10px;
             margin-right: 10px; /* Space between buttons */
         }
         .llm-button:hover {
             background-color: #92209d; /* Lighter purple on hover */
         }
         .llm-button:active {
             transform: scale(0.98);
         }
         .llm-loading-indicator {
             margin-left: 10px;
             font-style: italic;
             color: #6a0572;
         }

        #generate-pack-modal {
            display: none;
        }
        #generated-items-list li {
            background-color: #f8f8f8;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
         #generated-items-list li .item-name {
             font-weight: bold;
         }
         #generated-items-list li .item-details {
             font-size: 0.9em;
             color: #555;
         }
         #generated-items-list li button {
             padding: 5px 10px;
             background-color: #06d6a0;
             color: white;
             border: none;
             border-radius: 5px;
             cursor: pointer;
             transition: background-color 0.3s ease;
         }
         #generated-items-list li button:hover {
             background-color: #80ed99;
         }

        /* Explicitly ensure form elements are visible within generate-pack-section */
        #generate-pack-section .form-grid {
            display: grid !important; /* Force grid display for the container */
            visibility: visible !important;
            opacity: 1 !important;
        }

        #generate-pack-section .form-group {
            display: flex !important; /* Force flex display for each form group */
            visibility: visible !important;
            opacity: 1 !important;
        }

        #generate-pack-section input[type="text"],
        #generate-pack-section input[type="number"] {
            display: block !important; /* Force block display for inputs */
            visibility: visible !important;
            opacity: 1 !important;
        }

        #generate-pack-section button#generate-pack-list-button {
            display: inline-block !important; /* Force inline-block for the button */
            visibility: visible !important;
            opacity: 1 !important;
        }

        .item-suggestion.existing-item {
            background-color: #e0f2f7; /* Light blue for existing items */
            border: 1px solid #0077b6;
        }

        .item-suggestion.existing-item .add-generated-item-checkbox {
            display: none; /* Hide checkbox for existing items */
        }


        @media (max-width: 768px) {
             .pack-detail-grid {
                 grid-template-columns: 1fr; /* Stack columns on small screens */
             }
        }

        .image-preview {
            width: 80px; /* Adjust size as needed */
            height: 80px; /* Adjust size as needed */
            border-radius: 8px; /* Rounded corners for preview */
            object-fit: cover; /* Cover the area */
            border: 1px solid #ddd;
            margin-top: 10px; /* Space below input */
            display: block; /* Ensure it takes its own line */
            background-color: #f0f0f0; /* Light background for empty/broken image */
        }


    </style>
</head>
<body>

    <div class="sidebar">
        <h2>Backpack Filler</h2>
        <nav>
            <ul>
                <li><a href="#inventory" class="active" data-section="inventory"><i class="fas fa-boxes"></i> Mon Inventaire <span id="inventory-weight" class="menu-weight"></span></a></li>
                <li><a href="#new-item" data-section="new-item"><i class="fas fa-plus-circle"></i> Ajouter un Item</a></li>
                <li><a href="#manage-packs" data-section="manage-packs"><i class="fas fa-suitcase"></i> Packs</a></li>
                 <li><a href="#manage-categories" data-section="manage-categories"><i class="fas fa-tags"></i> Cat√©gories</a></li>
                 <li><a href="#generate-pack-section" data-section="generate-pack"><i class="fas fa-magic"></i> G√©n√©rer un Pack ‚ú®</a></li>
            </ul>
        </nav>
         </div>

    <div class="main-content">
        <div id="inventory-section" class="content-section active">
            <h2>Mon Inventaire</h2>
             <select id="view-filter" class="mb-4 p-2 border rounded">
                 <option value="all">Voir tout</option>
                 <option value="categories">Voir par Cat√©gorie</option>
                 </select>
            <ul id="item-list" class="item-list">
                </ul>
            <div id="total-weight" class="total-weight">
                Poids Total : 0 g
            </div>
        </div>

        <div id="new-item-section" class="content-section">
            <h2>Ajouter un Nouvel Item</h2>
            <div class="form-grid">
                <div class="form-group">
                    <label for="item-name">Nom de l'item</label>
                    <input type="text" id="item-name" placeholder="Ex: Tente 2 places">
                </div>
                <div class="form-group">
                     <label for="item-weight">Poids (g)</label>
                    <input type="number" id="item-weight" placeholder="Ex: 1500" min="0">
                </div>
                <div class="form-group">
                    <label for="item-brand">Marque</label>
                    <input type="text" id="item-brand" placeholder="Ex: Decathlon">
                </div>
                <div class="form-group">
                    <label for="item-category">Cat√©gorie</label>
                    <select id="item-category"> <option value="">-- S√©lectionner une Cat√©gorie --</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="item-tags">Tags (s√©par√©s par virgule)</label>
                    <input type="text" id="item-tags" placeholder="Ex: bivouac, l√©ger">
                </div>
                <div class="form-group">
                    <label for="item-capacity">Capacit√©/Volume</label>
                    <input type="text" id="item-capacity" placeholder="Ex: 2 personnes / 15L">
                </div>
                <div class="form-group">
                    <label for="item-image-url">URL Image (optionnel)</label>
                    <input type="url" id="item-image-url" placeholder="Ex: https://example.com/tente.jpg">
                    <img id="new-item-image-preview" class="image-preview" src="https://placehold.co/80x80/eeeeee/aaaaaa?text=Image" alt="Aper√ßu image" style="display: none;">
                </div>
                 <div class="checkbox-group">
                     <input type="checkbox" id="item-consumable">
                     <label for="item-consumable">Consommable</label>
                 </div>
            </div>
            <button id="suggest-new-item-details-button" class="llm-button">Sugg√©rer D√©tails Item ‚ú®</button>
            <button id="add-item-button" class="form-button">Ajouter Item</button>
            <span id="new-item-loading-indicator" class="llm-loading-indicator hidden">Chargement...</span>
        </div>

         <div id="manage-packs-section" class="content-section">
            <h2>G√©rer les Packs</h2>
            <div class="input-group"> <input type="text" id="pack-name" placeholder="Nom du nouveau Pack">
                <button id="add-pack-button">Cr√©er Pack</button>
            </div>
            <h3>Liste des Packs</h3>
            <ul id="pack-list" class="pack-list">
                </ul>
         </div>

         <div id="pack-detail-section" class="content-section">
             <h2 id="pack-detail-title">D√©tails du Pack : </h2>
             <button id="unpack-all-button" class="unpack-all-button">Tout D√©baller ce Pack</button> <div class="pack-detail-grid">
                 <div class="pack-detail-column">
                     <h3>Items dans ce Pack</h3>
                     <ul id="items-in-pack-list">
                         </ul>
                 </div>
                 <div class="pack-detail-column">
                     <h3>Items disponibles</h3>
                     <ul id="available-items-list">
                         </ul>
                 </div>
             </div>
         </div>

         <div id="manage-categories-section" class="content-section">
             <h2>G√©rer les Cat√©gories</h2>
             <div class="input-group"> <input type="text" id="category-name" placeholder="Nom de la nouvelle Cat√©gorie">
                 <button id="add-category-button">Cr√©er Cat√©gorie</button>
             </div>
             <p class="text-gray-600 mb-4">Cliquez sur une cat√©gorie pour voir les items associ√©s.</p>
             <ul id="category-management-list" class="category-management-list">
                 </ul>
         </div>

         <div id="generate-pack-section" class="content-section">
             <h2>G√©n√©rer une Liste de Pack ‚ú®</h2>
             <div class="form-grid">
                 <div class="form-group">
                     <label for="gen-pack-destination">Destination (lieu ou type de terrain)</label>
                     <input type="text" id="gen-pack-destination" placeholder="Ex: Montagnes, For√™t, Ville">
                 </div>
                 <div class="form-group">
                     <label for="gen-pack-duration">Dur√©e (en jours)</label>
                     <input type="number" id="gen-pack-duration" min="1" value="3">
                 </div>
                 <div class="form-group">
                     <label for="gen-pack-activity">Activit√© principale</label>
                     <input type="text" id="gen-pack-activity" placeholder="Ex: Randonn√©e, Camping, Ski, Voyage">
                 </div>
             </div>
             <button id="generate-pack-list-button" class="llm-button">G√©n√©rer Suggestions ‚ú®</button>
             <span id="generate-pack-loading-indicator" class="llm-loading-indicator hidden">G√©n√©ration en cours...</span>

             <div id="generated-pack-results" class="mt-8"> <!-- Removed hidden class -->
                 <h3>Suggestions d'Items</h3>
                 <ul id="generated-items-list" class="item-list">
                     <!-- Generated items will be inserted here -->
                     <li class="text-center text-gray-500">Aucune suggestion d'item g√©n√©r√©e. Veuillez utiliser le formulaire ci-dessus.</li>
                 </ul>
                 <button id="add-selected-generated-items-button" class="form-button mt-4">Ajouter les items s√©lectionn√©s √† l'inventaire</button>
             </div>
         </div>


         <div id="pack-packing-modal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
             <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                 <div class="mt-3 text-center">
                     <h3 class="text-lg leading-6 font-medium text-gray-900" id="packing-pack-name">Emballage du Pack : </h3>
                     <div class="mt-2 px-7 py-3">
                         <ul id="pack-packing-list">
                             </ul>
                     </div>
                     <div class="items-center px-4 py-3">
                         <button id="close-packing-modal" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus::ring-blue-500">
                             Fermer
                         </button>
                     </div>
                 </div>
             </div>
         </div>

         <div id="edit-item-modal" class="modal">
             <div class="modal-content">
                 <span class="close-button" id="close-edit-modal">&times;</span>
                 <h2>Modifier Item</h2>
                  <div class="form-grid">
                     <div class="form-group">
                         <label for="edit-item-name">Nom de l'item</label>
                         <input type="text" id="edit-item-name">
                     </div>
                     <div class="form-group">
                          <label for="edit-item-weight">Poids (g)</label>
                         <input type="number" id="edit-item-weight" min="0">
                     </div>
                     <div class="form-group">
                         <label for="edit-item-brand">Marque</label>
                         <input type="text" id="edit-item-brand">
                     </div>
                     <div class="form-group">
                         <label for="edit-item-category">Cat√©gorie</label>
                         <select id="edit-item-category"> <option value="">-- S√©lectionner une Cat√©gorie --</option>
                         </select>
                     </div>
                     <div class="form-group">
                         <label for="edit-item-tags">Tags (s√©par√©s par virgule)</label>
                         <input type="text" id="edit-item-tags">
                     </div>
                     <div class="form-group">
                         <label for="edit-item-capacity">Capacit√©/Volume</label>
                         <input type="text" id="edit-item-capacity">
                     </div>
                     <div class="form-group">
                         <label for="edit-item-image-url">URL Image (optionnel)</label>
                         <input type="url" id="edit-item-image-url">
                         <img id="edit-item-image-preview" class="image-preview" src="https://placehold.co/80x80/eeeeee/aaaaaa?text=Image" alt="Aper√ßu image" style="display: none;">
                     </div>
                      <div class="checkbox-group">
                          <input type="checkbox" id="edit-item-consumable">
                          <label for="edit-item-consumable">Consommable</label>
                      </div>
                 </div>
                 <button id="suggest-edit-item-details-button" class="llm-button">Sugg√©rer D√©tails Item ‚ú®</button>
                 <button id="save-item-button" class="form-button">Enregistrer les modifications</button>
                 <span id="edit-item-loading-indicator" class="llm-loading-indicator hidden">Chargement...</span>
                 <input type="hidden" id="editing-item-id">
             </div>
         </div>


    </div>

    <script src="app.js"></script>
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/rando-matos/sw.js', { scope: '/rando-matos/' })
            .then(registration => {
              console.log('ServiceWorker registration successful with scope: ', registration.scope);
            })
            .catch(error => {
              console.log('ServiceWorker registration failed: ', error);
            });
        });
      }
    </script>

</body>
</html>
